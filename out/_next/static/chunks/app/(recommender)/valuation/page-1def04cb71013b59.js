(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[389],{1981:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,s(2898).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},3067:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,s(2898).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},9251:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,s(2898).Z)("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]])},6264:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,s(2898).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},1827:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,s(2898).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},4522:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,s(2898).Z)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]])},410:function(e,a,s){Promise.resolve().then(s.bind(s,5134))},5134:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return v}});var t=s(7437),r=s(3067),n=s(1396),l=s.n(n),c=s(4033),o=s(2265);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,s(2898).Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);var d=s(6264),u=s(1827),m=s(1981),x=s(9251),h=s(4522),b=s(1657),p=s(286);function f(){let{initialBrand:e,initialModel:a,initialYear:s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[r,n]=(0,o.useState)(e||""),[l,c]=(0,o.useState)(a||""),[f,j]=(0,o.useState)(s||null),[v,g]=(0,o.useState)([]),[N,y]=(0,o.useState)([]),[w,k]=(0,o.useState)([]),[E,C]=(0,o.useState)(!1),[S,D]=(0,o.useState)(!1),[Z,V]=(0,o.useState)(!1),[_,A]=(0,o.useState)(!1),[I,M]=(0,o.useState)(null),[F,O]=(0,o.useState)(null),[P,R]=(0,o.useState)(null);(0,o.useEffect)(()=>{q()},[]),(0,o.useEffect)(()=>{e&&v.includes(e)&&z(e)},[e,v]),(0,o.useEffect)(()=>{e&&a&&N.includes(a)&&B(e,a)},[e,a,N]),(0,o.useEffect)(()=>{e&&a&&s&&v.includes(e)&&N.includes(a)&&w.includes(s)&&U()},[e,a,s,v,N,w]),(0,o.useEffect)(()=>{r&&(z(r),c(""),j(null),M(null),O(null))},[r]),(0,o.useEffect)(()=>{r&&l&&(B(r,l),j(null),M(null),O(null))},[r,l]);let q=async()=>{C(!0),R(null);try{let e=await fetch("/api/autopress/brands"),a=await e.json();if(a.success)g(a.brands);else throw Error(a.error||"Error al cargar marcas")}catch(e){R(e instanceof Error?e.message:"Error al cargar marcas")}finally{C(!1)}},z=async e=>{D(!0),R(null);try{let a=await fetch("/api/autopress/models?brand=".concat(encodeURIComponent(e))),s=await a.json();if(s.success)y(s.models);else throw Error(s.error||"Error al cargar modelos")}catch(e){R(e instanceof Error?e.message:"Error al cargar modelos")}finally{D(!1)}},B=async(e,a)=>{V(!0),R(null);try{let s=await fetch("/api/autopress/years?brand=".concat(encodeURIComponent(e),"&model=").concat(encodeURIComponent(a))),t=await s.json();if(t.success)k(t.years);else throw Error(t.error||"Error al cargar a\xf1os")}catch(e){R(e instanceof Error?e.message:"Error al cargar a\xf1os")}finally{V(!1)}},U=async()=>{if(!r||!l||!f){R("Por favor selecciona marca, modelo y a\xf1o");return}A(!0),R(null),M(null),O(null);try{let e=await fetch("/api/autopress/valuations-by-filters?brand=".concat(encodeURIComponent(r),"&model=").concat(encodeURIComponent(l),"&year=").concat(f)),a=await e.json();if(!e.ok)throw Error(a.error||"Error al buscar tasaciones");a.vehicleData&&a.vehicleData.length>0?(M(a.vehicleData),1===a.vehicleData.length&&O(a.vehicleData[0])):R("No se encontraron tasaciones para esta combinaci\xf3n")}catch(e){R(e instanceof Error?e.message:"Error al buscar tasaciones")}finally{A(!1)}};return(0,t.jsxs)("div",{className:"w-full max-w-4xl mx-auto space-y-6",children:[(0,t.jsx)("div",{className:"bg-white rounded-2xl shadow-sm border border-neutral-200 p-6",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-neutral-900 mb-2",children:"Buscar Valor Comercial por Veh\xedculo"}),(0,t.jsx)("p",{className:"text-sm text-neutral-600",children:"Selecciona la marca, modelo y a\xf1o para conocer el valor comercial"})]}),(0,t.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Marca"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("select",{value:r,onChange:e=>n(e.target.value),disabled:E,className:(0,b.cn)("w-full px-4 py-3 pr-10 border rounded-xl appearance-none","focus:outline-none focus:ring-2 transition-all","border-neutral-200 focus:ring-brand/20 focus:border-brand",E&&"bg-neutral-50 cursor-not-allowed"),children:[(0,t.jsx)("option",{value:"",children:"Selecciona marca"}),v.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]}),(0,t.jsx)(i,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-5 w-5 text-neutral-400 pointer-events-none"})]})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Modelo"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("select",{value:l,onChange:e=>c(e.target.value),disabled:!r||S,className:(0,b.cn)("w-full px-4 py-3 pr-10 border rounded-xl appearance-none","focus:outline-none focus:ring-2 transition-all","border-neutral-200 focus:ring-brand/20 focus:border-brand",(!r||S)&&"bg-neutral-50 cursor-not-allowed"),children:[(0,t.jsx)("option",{value:"",children:r?"Selecciona modelo":"Primero selecciona marca"}),N.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]}),(0,t.jsx)(i,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-5 w-5 text-neutral-400 pointer-events-none"})]})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"A\xf1o"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("select",{value:f||"",onChange:e=>j(e.target.value?parseInt(e.target.value):null),disabled:!l||Z,className:(0,b.cn)("w-full px-4 py-3 pr-10 border rounded-xl appearance-none","focus:outline-none focus:ring-2 transition-all","border-neutral-200 focus:ring-brand/20 focus:border-brand",(!l||Z)&&"bg-neutral-50 cursor-not-allowed"),children:[(0,t.jsx)("option",{value:"",children:l?"Selecciona a\xf1o":"Primero selecciona modelo"}),w.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]}),(0,t.jsx)(i,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-5 w-5 text-neutral-400 pointer-events-none"})]})]})]}),(0,t.jsx)("button",{onClick:U,disabled:_||!r||!l||!f,className:(0,b.cn)("w-full px-6 py-3 rounded-xl font-medium transition-all","flex items-center justify-center gap-2",!_&&r&&l&&f?"bg-brand text-white hover:bg-brand/90 hover:shadow-md":"bg-neutral-100 text-neutral-400 cursor-not-allowed"),children:_?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Z,{className:"h-5 w-5 animate-spin"}),"Buscando tasaciones..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.Z,{className:"h-5 w-5"}),"Buscar Tasaci\xf3n"]})}),P&&(0,t.jsxs)("div",{className:"flex items-start gap-2 p-3 bg-red-50 text-red-700 rounded-lg",children:[(0,t.jsx)(m.Z,{className:"h-5 w-5 flex-shrink-0 mt-0.5"}),(0,t.jsx)("span",{className:"text-sm",children:P})]})]})}),I&&I.length>0&&(0,t.jsxs)("div",{className:"space-y-4",children:[I.length>1&&(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-neutral-200 p-4",children:[(0,t.jsxs)("p",{className:"text-sm font-medium text-neutral-700 mb-2",children:["Se encontraron ",I.length," versiones. Selecciona una:"]}),(0,t.jsx)("div",{className:"grid gap-2",children:I.map(e=>(0,t.jsxs)("button",{onClick:()=>O(e),className:(0,b.cn)("p-3 rounded-lg border-2 text-left transition-all",(null==F?void 0:F.id_version)===e.id_version?"border-brand bg-brand/5":"border-neutral-200 hover:border-neutral-300"),children:[(0,t.jsxs)("div",{className:"font-medium",children:[e.marca," ",e.modelo," ",e.version]}),(0,t.jsxs)("div",{className:"text-sm text-neutral-600",children:["A\xf1o ",e.ano," • ",e.combustible," • ",e.transmision]})]},e.id_version))})]}),F&&(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-neutral-200 overflow-hidden",children:[(0,t.jsx)("div",{className:"bg-gradient-to-r from-brand/10 to-brand/5 p-6 border-b border-neutral-200",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"text-2xl font-bold text-neutral-900",children:[F.marca," ",F.modelo]}),(0,t.jsxs)("p",{className:"text-lg text-neutral-700 mt-1",children:[F.version," • A\xf1o ",F.ano]}),(0,t.jsxs)("div",{className:"flex gap-4 mt-3 text-sm text-neutral-600",children:[F.combustible&&(0,t.jsx)("span",{children:F.combustible}),F.transmision&&(0,t.jsxs)(t.Fragment,{children:[F.combustible&&(0,t.jsx)("span",{children:"•"}),(0,t.jsx)("span",{children:F.transmision})]}),F.carroceria&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{children:"•"}),(0,t.jsx)("span",{children:F.carroceria})]})]})]}),(0,t.jsx)(x.Z,{className:"h-8 w-8 text-brand/50"})]})}),F.valuation&&(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"text-center py-4",children:[(0,t.jsx)("p",{className:"text-sm text-neutral-600 mb-2",children:"Valor Comercial Estimado"}),(0,t.jsx)("p",{className:"text-4xl font-bold text-brand",children:F.valuation.formatted.commercial}),(0,t.jsxs)("p",{className:"text-xs text-neutral-500 mt-2",children:["Tasaci\xf3n del ",F.valuation.fecha_tasacion]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"bg-neutral-50 rounded-lg p-4",children:[(0,t.jsx)("p",{className:"text-sm text-neutral-600 mb-1",children:"Valor M\xednimo"}),(0,t.jsx)("p",{className:"text-xl font-semibold text-neutral-900",children:F.valuation.formatted.minimum})]}),(0,t.jsxs)("div",{className:"bg-neutral-50 rounded-lg p-4",children:[(0,t.jsx)("p",{className:"text-sm text-neutral-600 mb-1",children:"Valor M\xe1ximo"}),(0,t.jsx)("p",{className:"text-xl font-semibold text-neutral-900",children:F.valuation.formatted.maximum})]})]}),F.valuation.projections&&(0,t.jsxs)("div",{className:"border-t border-neutral-200 pt-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,t.jsx)(h.Z,{className:"h-5 w-5 text-neutral-600"}),(0,t.jsx)("h4",{className:"font-medium text-neutral-900",children:"Proyecci\xf3n de Depreciaci\xf3n"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-xs text-neutral-600 mb-1",children:"En 1 a\xf1o"}),(0,t.jsx)("p",{className:"text-lg font-semibold text-neutral-900",children:(0,p.O5)(F.valuation.projections.oneYear)})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-xs text-neutral-600 mb-1",children:"En 2 a\xf1os"}),(0,t.jsx)("p",{className:"text-lg font-semibold text-neutral-900",children:(0,p.O5)(F.valuation.projections.twoYears)})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-xs text-neutral-600 mb-1",children:"En 3 a\xf1os"}),(0,t.jsx)("p",{className:"text-lg font-semibold text-neutral-900",children:(0,p.O5)(F.valuation.projections.threeYears)})]})]})]}),(0,t.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,t.jsx)("button",{className:"flex-1 px-4 py-3 bg-brand text-white rounded-xl font-medium hover:bg-brand/90 transition-all",children:"Cotizar Seguro"}),(0,t.jsx)("button",{className:"flex-1 px-4 py-3 bg-neutral-100 text-neutral-700 rounded-xl font-medium hover:bg-neutral-200 transition-all",children:"Comparar con Otro"})]})]}),!F.valuation&&(0,t.jsxs)("div",{className:"p-8 text-center",children:[(0,t.jsx)(m.Z,{className:"h-12 w-12 text-amber-500 mx-auto mb-3"}),(0,t.jsx)("p",{className:"text-neutral-700 font-medium",children:"No hay informaci\xf3n de tasaci\xf3n disponible"}),(0,t.jsx)("p",{className:"text-sm text-neutral-600 mt-1",children:"Por favor, intenta m\xe1s tarde o contacta soporte"})]})]})]})]})}function j(){let e=(0,c.useSearchParams)(),a=e.get("brand")||void 0,s=e.get("model")||void 0,n=e.get("year"),o=n?parseInt(n):void 0;return(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-neutral-50 to-neutral-100",children:[(0,t.jsx)("header",{className:"bg-white/80 backdrop-blur-lg border-b border-neutral-200 sticky top-0 z-40",children:(0,t.jsx)("div",{className:"container mx-auto px-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,t.jsxs)(l(),{href:"/",className:"flex items-center gap-2 text-neutral-600 hover:text-neutral-900 transition-colors",children:[(0,t.jsx)(r.Z,{className:"h-5 w-5"}),(0,t.jsx)("span",{className:"font-medium",children:"Volver"})]}),(0,t.jsx)("h1",{className:"text-xl font-bold bg-gradient-to-r from-brand to-brand/70 bg-clip-text text-transparent",children:"Tasaci\xf3n de Veh\xedculos"}),(0,t.jsx)("div",{className:"w-20"})," "]})})}),(0,t.jsx)("main",{className:"container mx-auto px-4 py-12",children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,t.jsxs)("div",{className:"text-center mb-12",children:[(0,t.jsx)("h2",{className:"text-4xl font-bold text-neutral-900 mb-4",children:"Conoce el Valor Real de tu Veh\xedculo"}),(0,t.jsx)("p",{className:"text-lg text-neutral-600 max-w-2xl mx-auto",children:"Obt\xe9n una tasaci\xf3n profesional basada en datos del mercado actual. Selecciona la marca, modelo y a\xf1o de tu veh\xedculo."})]}),(0,t.jsx)(f,{initialBrand:a,initialModel:s,initialYear:o}),(0,t.jsxs)("div",{className:"grid md:grid-cols-3 gap-6 mt-12",children:[(0,t.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-neutral-200",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-brand/10 rounded-lg flex items-center justify-center mb-4",children:(0,t.jsx)("span",{className:"text-2xl",children:"\uD83D\uDD0D"})}),(0,t.jsx)("h3",{className:"font-semibold text-neutral-900 mb-2",children:"B\xfasqueda por Filtros"}),(0,t.jsx)("p",{className:"text-sm text-neutral-600",children:"Selecciona marca, modelo y a\xf1o para obtener la tasaci\xf3n"})]}),(0,t.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-neutral-200",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-brand/10 rounded-lg flex items-center justify-center mb-4",children:(0,t.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCCA"})}),(0,t.jsx)("h3",{className:"font-semibold text-neutral-900 mb-2",children:"Datos Actualizados"}),(0,t.jsx)("p",{className:"text-sm text-neutral-600",children:"Informaci\xf3n basada en el mercado automotriz chileno actual"})]}),(0,t.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-neutral-200",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-brand/10 rounded-lg flex items-center justify-center mb-4",children:(0,t.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCB0"})}),(0,t.jsx)("h3",{className:"font-semibold text-neutral-900 mb-2",children:"Rango de Valores"}),(0,t.jsx)("p",{className:"text-sm text-neutral-600",children:"Conoce el valor m\xednimo, comercial y m\xe1ximo de tu veh\xedculo"})]})]})]})})]})}function v(){return(0,t.jsx)(o.Suspense,{fallback:(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-neutral-50 to-neutral-100"}),children:(0,t.jsx)(j,{})})}},1657:function(e,a,s){"use strict";s.d(a,{cn:function(){return n}});var t=s(7042),r=s(4769);function n(){for(var e=arguments.length,a=Array(e),s=0;s<e;s++)a[s]=arguments[s];return(0,r.m6)((0,t.W)(a))}},286:function(e,a,s){"use strict";function t(e){return new Intl.NumberFormat("es-CL",{style:"currency",currency:"CLP",minimumFractionDigits:0,maximumFractionDigits:0}).format(e)}s.d(a,{O5:function(){return t}})},4033:function(e,a,s){e.exports=s(5313)}},function(e){e.O(0,[221,985,971,938,744],function(){return e(e.s=410)}),_N_E=e.O()}]);